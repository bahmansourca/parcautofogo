<%- include('partials/header') %>

<div class="admin-header">
  <h1>Administration — Voitures</h1>
  <a class="btn primary" href="/admin/cars/new">Ajouter une voiture</a>
  <p class="hint">Ces actions ne nécessitent pas d'authentification (pour l'instant). À restreindre plus tard.</p>
  <p class="hint">Conseil: Utilisez votre téléphone pour prendre/ajouter des photos directement.</p>
  <hr />
</div>

<table class="table">
  <thead>
    <tr>
      <th>#</th>
      <th>Image</th>
      <th>Titre</th>
      <th>Année</th>
      <th>Prix</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
  <% if (!cars || cars.length === 0) { %>
    <tr><td colspan="6">Aucune voiture</td></tr>
  <% } %>
  <% cars.forEach(car => { %>
    <tr>
      <td><%= car.id %></td>
      <td class="image-cell">
        <% if (car.image) { %>
          <img class="image-thumb" src="<%= car.image %>" alt="<%= car.title %>" loading="lazy" />
        <% } else { %>
          —
        <% } %>
      </td>
      <td><%= car.title %></td>
      <td><%= car.year || '' %></td>
      <td>
        <% if (car.price) { %>
          <%= new Intl.NumberFormat('fr-FR', { style: 'currency', currency: 'GNF' }).format(car.price) %>
        <% } %>
      </td>
      <td>
        <a class="btn" href="/admin/cars/<%= car.id %>/edit">Modifier</a>
        <form action="/admin/cars/<%= car.id %>/delete" method="post" style="display:inline" onsubmit="return confirm('Supprimer cette voiture ?');">
          <button class="btn danger" type="submit">Supprimer</button>
        </form>
      </td>
    </tr>
  <% }) %>
  </tbody>
  </table>

<%- include('partials/footer') %>

